x-veld:
  chain:

services:
  veld_train_word2vec:
    extends:
      file: ./veld_code_13_word2vec/veld_train.yaml
      service: veld_train 
    volumes:
      - ./veld_data_18_amc_we_training_data/data/203_vert_rftt_inhalt_nodup__uniq__stripped__sampled__lowercased__punctuation_removed__cleaned/:/veld/input/:z
      - ./veld_data_11_word2vec_models/data/m3/:/veld/output/:z
    environment:
      in_train_data_file: "data.txt"
      out_model_file: "m3.bin"
      model_description: "10% AMC model"
      epochs: 10
      vector_size: 200

  veld_eval_word2vec:
    extends:
      file: ./veld_code_14_we_evaluation/veld_eval_word2vec.yaml
      service: veld_eval_word2vec
    volumes:
      - ./veld_data_11_word2vec_models/data/m3/:/veld/input/1/:z
      - ./veld_data_10_we_evaluation/evaluation_gold_data/lowercase/:/veld/input/2/:z
      - ./veld_data_10_we_evaluation/evaluation_results/:/veld/output/1/:z
      - ./veld_data_10_we_evaluation/evaluation_results/logs/word2vec/:/veld/output/2:z
    environment:
      in_1_model_file: "m3.bin"
      in_1_model_metadata_file: "veld.yaml"
      in_2_eval_gold_data_file: "eval_data_lowercase.yaml"
      out_1_eval_summary_file: "summary.yaml"
      out_2_eval_log_file: "m3.txt"
    depends_on:
      veld_train_word2vec:
        condition: service_completed_successfully

